ATTRACTIONS DOMAIN – FINAL CONSOLIDATION TASK

GOAL:
Eliminate all hardcoded destination lists and make the database the single source of truth for the entire Attractions domain (Hub, Listings, SSR, Sitemap, Scraper-safe).

CURRENT PROBLEM:
There are multiple conflicting destination sources:
- attractions.tsx has hardcoded DESTINATIONS (8 cities)
- destination-attractions.tsx has hardcoded DESTINATION_NAMES (16 cities)
- scrape-attractions-v2.ts has its own whitelist
- Database already contains the real truth (16 cities, 3,408 attractions)

This causes drift, wrong counts, SEO risk, and architectural noise.

TARGET ARCHITECTURE (MANDATORY):
Single Source of Truth = DATABASE

DB tables:
- tiqets_attractions → attractions data + counts per city
- destinations (or equivalent) → slug, name, country, image, is_active

DATA FLOW:
DATABASE
  ↓
API: GET /api/public/attraction-destinations
  ↓
Used by:
- /attractions (Hub page)
- /attractions/:destination (Listing page)
- Sitemap generation
- SSR renderer (already works)
- Client-side navigation

REQUIRED FIXES (DO ALL):

1. API
Create endpoint:
GET /api/public/attraction-destinations

Response:
{
  destinations: [
    {
      slug: "london",
      name: "London",
      country: "United Kingdom",
      count: 446,
      image: "/attractions/london.webp"
    }
  ],
  totalAttractions: 3408
}

Rules:
- counts MUST come from tiqets_attractions
- slug MUST come from destinations table (no ad-hoc slugify)
- no hardcoded arrays anywhere

2. attractions.tsx (Hub)
- DELETE DESTINATIONS array
- Fetch destinations from /api/public/attraction-destinations
- Render destination cards dynamically
- Counts must match DB exactly

3. destination-attractions.tsx (Listing)
- DELETE DESTINATION_NAMES
- Use route /attractions/:destination (no /list/)
- Fetch:
  a) destination meta from destinations API/table
  b) attractions from /api/public/tiqets/attractions?city=slug
- NEVER derive destination name from first attraction result

4. Scraper
- scrape-attractions-v2.ts may keep a whitelist,
  BUT it must be validated against destinations table
  OR switched to reading active destinations from DB

5. Sitemap & SSR
- Sitemap must include:
  - /attractions
  - /attractions/:destination for ALL destinations
  - paginated /attractions?page=N
- SSR pagination remains capped (50/page) but fully crawlable via pagination

6. Cleanup
- Remove any remaining destination hardcoding in client, server, or scripts
- There should be exactly ONE place that defines destinations: the database

DELIVERABLE:
- Zero hardcoded destination lists
- Counts identical across Hub, Listings, Sitemap
- Adding/removing a destination in DB automatically updates the site
- No architectural drift

DO NOT:
- Add temporary mappings
- Derive metadata from content rows
- Introduce new hardcoded configs

Report back only when all destination hardcoding is eliminated.