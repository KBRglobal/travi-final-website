# TRAVI Route Manifest

> Auto-generated by route-surgeon. Lists all registered API routes with auth status and handler file.

## Public API (No Auth Required)

| Method | Path                                     | Handler File                                                          |
| ------ | ---------------------------------------- | --------------------------------------------------------------------- |
| GET    | `/api/public/contents`                   | `routes/content-crud-routes.ts` via `routes/public-content-routes.ts` |
| GET    | `/api/public/destinations`               | `routes/public-content-routes.ts`                                     |
| GET    | `/api/public/destinations/:id`           | `routes/public-content-routes.ts`                                     |
| GET    | `/api/public/homepage-sections`          | `routes/public-content-routes.ts`                                     |
| GET    | `/api/public/homepage-cards`             | `routes/public-content-routes.ts`                                     |
| GET    | `/api/public/experience-categories`      | `routes/public-content-routes.ts`                                     |
| GET    | `/api/public/region-links`               | `routes/public-content-routes.ts`                                     |
| GET    | `/api/public/attraction-destinations`    | `routes/public-content-routes.ts`                                     |
| GET    | `/api/public/tiqets/attractions`         | `routes/public-content-routes.ts`                                     |
| GET    | `/api/public/content/:slug/:locale`      | `routes/content-routes.ts`                                            |
| GET    | `/api/public/content/:slug/translations` | `routes/content-routes.ts`                                            |
| GET    | `/api/public/homepage-config`            | `routes/content-routes.ts`                                            |
| GET    | `/api/locales`                           | `routes/content-routes.ts`                                            |
| GET    | `/api/contents/slug/:slug`               | `routes/content-crud-routes.ts` (published=public)                    |
| GET    | `/api/contents/:id/schema`               | `routes/content-crud-routes.ts`                                       |
| GET    | `/api/search`                            | `search/routes.ts`                                                    |
| GET    | `/api/search/spell-check`                | `search/routes.ts`                                                    |
| GET    | `/api/search/synonyms`                   | `search/routes.ts`                                                    |
| GET    | `/api/search/rewrite`                    | `search/routes.ts`                                                    |
| GET    | `/api/search/similar/:contentId`         | `search/routes.ts`                                                    |
| GET    | `/api/search/analyze`                    | `search/routes.ts`                                                    |
| GET    | `/api/search/expand`                     | `search/routes.ts`                                                    |
| GET    | `/api/ai-images/:filename`               | `routes/misc-routes.ts`                                               |
| GET    | `/api/login`                             | `replitAuth.ts`                                                       |
| GET    | `/api/callback`                          | `replitAuth.ts`                                                       |
| GET    | `/api/logout`                            | `replitAuth.ts`                                                       |
| GET    | `/api/access-denied-info`                | `replitAuth.ts`                                                       |
| GET    | `/healthz`                               | `index.ts`                                                            |
| \*     | `/api/external/*`                        | `routes/external-data-routes.ts`                                      |
| \*     | `/api/destinations/*` (POIs)             | `routes/destination-pois-routes.ts`                                   |
| \*     | `/api/ai-quality/*`                      | `routes/ai-quality-routes.ts`                                         |
| \*     | AEO routes (robots.txt, llms.txt)        | `aeo/index.ts`                                                        |

## Admin API (Auth Required)

| Method | Path                                      | Auth                                    | Handler File                        |
| ------ | ----------------------------------------- | --------------------------------------- | ----------------------------------- |
| GET    | `/api/contents`                           | requireAuth                             | `routes/content-crud-routes.ts`     |
| GET    | `/api/contents/attention`                 | requireAuth                             | `routes/content-crud-routes.ts`     |
| GET    | `/api/contents/:id`                       | requireAuth                             | `routes/content-crud-routes.ts`     |
| POST   | `/api/contents`                           | requirePermission(canCreate)            | `routes/content-crud-routes.ts`     |
| PATCH  | `/api/contents/:id`                       | requireOwnContentOrPermission(canEdit)  | `routes/content-crud-routes.ts`     |
| DELETE | `/api/contents/:id`                       | requireOwnershipOrPermission(canDelete) | `routes/content-crud-routes.ts`     |
| GET    | `/api/contents/:id/versions`              | public (no auth)                        | `routes/content-crud-routes.ts`     |
| POST   | `/api/contents/:id/versions/:vid/restore` | requireAuth                             | `routes/content-crud-routes.ts`     |
| GET    | `/api/contents/:id/translations`          | public                                  | `routes/content-crud-routes.ts`     |
| POST   | `/api/contents/:id/translations`          | requirePermission(canCreate)            | `routes/content-crud-routes.ts`     |
| POST   | `/api/contents/:id/translate-all`         | requirePermission(canEdit)              | `routes/content-crud-routes.ts`     |
| POST   | `/api/contents/:id/cancel-translation`    | requirePermission(canEdit)              | `routes/content-crud-routes.ts`     |
| \*     | `/api/teams/*`                            | requireAuth                             | `enterprise-routes.ts`              |
| \*     | `/api/workflows/*`                        | requirePermission(canManageSettings)    | `routes/webhook-workflow-routes.ts` |
| \*     | `/api/webhooks/*`                         | requirePermission(canManageSettings)    | `enterprise-routes.ts`              |
| \*     | `/api/notifications/*`                    | requireAuth                             | `enterprise-routes.ts`              |
| \*     | `/api/activity`                           | requireAuth                             | `enterprise-routes.ts`              |
| \*     | `/api/translate/*`                        | requireAuth                             | `routes/translate.ts`               |
| \*     | `/api/chat/*`                             | requireAuth                             | `routes/chat.ts`                    |
| \*     | `/api/social/*`                           | requireAuth                             | `social-routes.ts`                  |
| \*     | `/api/site-config/*`                      | requireAuth (internal)                  | `site-config-routes.ts`             |

## Admin Panel Routes (Auth + Permission Required)

| Method | Path                                | Auth                           | Handler File                             |
| ------ | ----------------------------------- | ------------------------------ | ---------------------------------------- |
| \*     | `/api/admin/alerts`                 | requireAuth + canViewAnalytics | `alerts/index.ts`                        |
| \*     | `/api/admin/jobs`                   | requireAuth + canEdit          | `routes/admin/jobs-routes.ts`            |
| \*     | `/api/admin/intelligence/coverage`  | requireAuth                    | `intelligence/coverage.ts`               |
| \*     | `/api/admin/autonomy`               | requireAuth                    | `autonomy/policy/admin-routes.ts`        |
| \*     | `/api/admin/autonomy/control-plane` | requireAuth                    | `autonomy/control-plane/admin-routes.ts` |
| \*     | `/api/admin/incidents`              | requireAuth + canEdit          | `incidents/index.ts`                     |
| \*     | `/api/admin/audit`                  | requireAuth + canViewAuditLogs | `audit-v2/index.ts`                      |
| \*     | `/api/admin/entity-quality`         | requireAuth + canEdit          | `entity-quality/index.ts`                |
| \*     | `/api/admin/exports`                | requireAuth + canEdit          | `exports/index.ts`                       |
| \*     | `/api/admin/go-live`                | requireAuth + canEdit          | `go-live/routes.ts`                      |
| \*     | `/api/admin/readiness`              | requireAuth + canEdit          | `platform-readiness/index.ts`            |
| \*     | `/api/admin/governor`               | requireAuth + canEdit          | `platform-governor/index.ts`             |
| \*     | `/api/admin/media`                  | requireAuth                    | `routes/admin/media-library-routes.ts`   |
| \*     | `/api/admin/media-intelligence`     | requireAuth                    | `media-intelligence/index.ts`            |
| \*     | `/api/admin/gatekeeper`             | requireAuth + canEdit          | `routes/admin/gatekeeper-routes.ts`      |
| \*     | `/api/admin/octypo`                 | requireAuth + canEdit          | `routes/admin/octypo-settings-routes.ts` |
| \*     | `/api/octypo`                       | requireAuth + canEdit          | `routes/admin/octypo-routes.ts`          |
| \*     | `/api/octypo/pilot`                 | requireAuth + canEdit          | `octypo/pilot/routes.ts`                 |
| \*     | `/api/octypo/magic`                 | requireAuth (internal)         | `routes/magic-routes.ts`                 |
| \*     | `/api/vams`                         | requireAuth + canEdit          | `vams/index.ts`                          |
| \*     | `/api/growth-os`                    | requireAuth                    | `growth-os/index.ts`                     |
| \*     | `/api/deploy-safety`                | requireAuth                    | `deployment-safety/index.ts`             |

## Ops Routes (Auth + Permission Required)

| Method | Path                        | Auth                  | Handler File                         |
| ------ | --------------------------- | --------------------- | ------------------------------------ |
| \*     | `/api/ops/cutover`          | requireAuth + canEdit | `production-cutover/routes.ts`       |
| \*     | `/api/ops/readiness`        | requireAuth + canEdit | `continuous-readiness/routes.ts`     |
| \*     | `/api/ops/blast-radius`     | requireAuth + canEdit | `blast-radius/routes.ts`             |
| \*     | `/api/ops/forensics`        | requireAuth + canEdit | `go-live-forensics/routes.ts`        |
| \*     | `/api/ops/executive/report` | requireAuth + canEdit | `executive/go-live-report/routes.ts` |
| \*     | `/api/ops/pcal`             | requireAuth + canEdit | `pcal/routes.ts`                     |

## Internal Routes

| Method | Path                             | Auth                                       | Handler File                       |
| ------ | -------------------------------- | ------------------------------------------ | ---------------------------------- |
| \*     | `/api/localization/*`            | requireAuth + canManageSettings (internal) | `localization/routes.ts`           |
| \*     | `/api/localization/governance/*` | feature-flagged                            | `localization-governance/index.ts` |
| \*     | `/api/docs`                      | requireAuth (prod) / open (dev)            | `openapi/swagger-ui.ts`            |
| \*     | `/api/ai/metrics`                | open                                       | `routes/ai-metrics.ts`             |
| \*     | `/api/system`                    | open                                       | `routes/ai-metrics.ts`             |

---

## Changes Made (route-surgeon)

### Duplicates Removed

1. **content-routes.ts**: Removed duplicate CRUD routes (GET/POST/PATCH/DELETE `/api/contents/*`) - kept in `content-crud-routes.ts` (more complete, has pagination + validation)
2. **content-routes.ts**: Removed duplicate public routes (`/api/public/contents`, `/api/public/destinations`, etc.) - kept in `public-content-routes.ts` (more complete, has attraction-destinations + tiqets)
3. **routes/index.ts**: Removed duplicate `/api/octypo` mount - kept in `routes.ts` with `requireAuth + requirePermission` guards
4. **ai-api.ts**: Removed duplicate `GET /api/ai-images/:filename` - kept in `misc-routes.ts`
5. **webhook-workflow-routes.ts**: Removed duplicate webhook routes (GET/POST `/api/webhooks`, test, logs) - kept in `enterprise-routes.ts` (more complete, has PATCH + DELETE)

### Auth Gaps Fixed

1. `/api/admin/media-intelligence` - Added `requireAuth`
2. `/api/growth-os` - Added `requireAuth`
3. `/api/deploy-safety` - Added `requireAuth`
4. `/api/docs` - Restricted to `requireAuth` in production
5. `/api/localization` - Already had `requireAuth` internally (verified)
